<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ARCHVIZ.3D - Select Template</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <link href="https://fonts.cdnfonts.com/css/akira-expanded" rel="stylesheet">
  
  <style>
    :root {
      --neon: #ffffff;
      --bg: #050505;
      --card-bg: rgba(10, 10, 10, 0.65);
      --card-border: rgba(255, 255, 255, 0.15);
      --accent: #00d2ff;
    }

    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      font-family: 'Consolas', 'Courier New', monospace;
      color: var(--neon);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Three.js Background */
    #bg-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1;
      pointer-events: none;
    }

    /* UI Container */
    .ui-container {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 800px; /* Slightly narrower for the 2-col look */
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 40px;
      text-transform: uppercase;
    }

    .brand {
      font-family: 'Akira Expanded', sans-serif;
      font-size: 3rem;
      letter-spacing: 4px;
      margin: 0;
      text-shadow: 0 0 20px rgba(0, 210, 255, 0.3);
    }
    .brand span { color: var(--accent); }

    .subtitle {
      font-size: 0.8rem;
      color: #888;
      margin-top: 10px;
      letter-spacing: 2px;
    }

    /* Grid System - 2 Columns for Templates */
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      width: 90%;
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      backdrop-filter: blur(8px);
      border: 1px solid var(--card-border);
      padding: 24px;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      background: rgba(30, 30, 30, 0.9);
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    }

    .card::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0; width: 100%; height: 2px;
      background: var(--accent);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
    }
    .card:hover::after { transform: scaleX(1); }

    .card h3 {
      font-family: 'Akira Expanded', sans-serif;
      font-size: 0.8rem;
      margin: 0 0 8px 0;
      color: #fff;
    }

    .card p {
      margin: 0;
      font-size: 0.8rem;
      color: #aaa;
    }

    /* The "Load Data" Card - Spans full width */
    .card.upload {
      grid-column: 1 / -1; /* Spans all columns */
      border-style: dashed;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px;
      margin-top: 10px;
    }
    .card.upload h3 { font-size: 1rem; color: var(--accent); }

    /* Responsive */
    @media (max-width: 600px) {
      .grid { grid-template-columns: 1fr; }
      .brand { font-size: 1.8rem; }
    }
  </style>
  
  <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
  </script>
</head>
<body>

  <canvas id="bg-canvas"></canvas>

  <div class="ui-container">
    <div class="header">
      <h1 class="brand">Archviz<span>.3d</span></h1>
      <div class="subtitle">System Ready // Select Configuration</div>
    </div>

    <div class="grid">
      <div class="card" onclick="loadTemplate('blank')">
        <h3>Blank</h3>
        <p>Initialize empty grid sector.</p>
      </div>

      <div class="card" onclick="loadTemplate('studio')">
        <h3>Studio</h3>
        <p>Small residential unit layout.</p>
      </div>

      <div class="card" onclick="loadTemplate('apartment')">
        <h3>Apartment</h3>
        <p>Standard 1BHK configuration.</p>
      </div>

      <div class="card" onclick="loadTemplate('office')">
        <h3>Office</h3>
        <p>Commercial workspace module.</p>
      </div>

      <label class="card upload" for="loadFile">
        <h3>Load Data Module</h3>
        <p>&gt; Import .JSON Project File</p>
        <input type="file" id="loadFile" accept=".json" style="display:none" onchange="loadFromFile(event)">
      </label>
    </div>
  </div>

  <script>
    function loadTemplate(name) {
      localStorage.setItem("selectedTemplate", name);
      window.location.href = "editor.html";
    }

    function loadFromFile(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        try {
          const data = JSON.parse(e.target.result);
          localStorage.setItem("customTemplate", JSON.stringify(data));
          localStorage.setItem("selectedTemplate", "custom");
          window.location.href = "editor.html";
        } catch (err) { alert("Data Corrupted: Invalid JSON."); }
      };
      reader.readAsText(file);
    }
  </script>

  <script type="module">
    import * as THREE from 'three';

    const canvas = document.querySelector('#bg-canvas');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x050505);
    scene.fog = new THREE.Fog(0x050505, 15, 60);

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.set(0, 15, 35);
    camera.lookAt(0, 0, 0);

    // Objects
    const group = new THREE.Group();
    scene.add(group);

    const gridHelper = new THREE.GridHelper(80, 80, 0x333333, 0x111111);
    scene.add(gridHelper);

    const geometry = new THREE.BoxGeometry(1, 1, 1);
    const edges = new THREE.EdgesGeometry(geometry);
    const material = new THREE.LineBasicMaterial({ color: 0x00d2ff, transparent: true, opacity: 0.25 });

    for (let i = 0; i < 25; i++) {
      const mesh = new THREE.LineSegments(edges, material);
      const h = Math.random() * 5 + 1;
      const x = (Math.random() - 0.5) * 50;
      const z = (Math.random() - 0.5) * 50;
      mesh.scale.set(Math.random() * 2 + 1, h, Math.random() * 2 + 1);
      mesh.position.set(x, h / 2, z);
      group.add(mesh);
    }

    function animate() {
      requestAnimationFrame(animate);
      group.rotation.y += 0.0015;
      camera.position.y = 15 + Math.sin(Date.now() * 0.0005) * 3;
      camera.lookAt(0, 0, 0);
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>